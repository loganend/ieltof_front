!function(t){function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=50)}({113:function(t,n,e){"use strict";e.r(n),e.d(n,"Stickers",function(){return i});var i=function(){function t(t,e,i,o){delete n[e],1==o?Emoji.favorite.addFavStickerId(t,e,i):-1==o&&Emoji.favorite.deleteFavStickerId(t,e,i)}var n={};return{toogleFavorite:function(e,i,o){i&&i.stopPropagation();var a=Emoji.stickers[Emoji.TAB_FAVORITE_STICKERS].stickers;if(!hasClass(e,"on")&&a.length>=20)return setTimeout(showFastBox(getLang("global_error"),getLang("purchases_stickers_favorite_limit_reached")).hide,3e3),!1;var r=attr(e,"data-sticker-id"),s=attr(e,"data-hash");if(!r||!s)return!1;if(n[r])return!1;n[r]=1;var c={act:"toggle_favorite",sticker_id:r,hash:s};toggleClass(e,"on");var u=t.pbind(o,r,e);ajax.post("/stickers.php",c,{onDone:u})}}}()},479:function(t,n,e){"use strict";e.r(n),e.d(n,"StickersSettings",function(){return i});var i={autoplay:0,setAutoplay:function(t){this.autoplay=t},getAutoplay:function(){return i.autoplay}}},50:function(t,n,e){t.exports=e(516)},516:function(t,n,e){"use strict";e.r(n);var i=e(650),o=e(479),a=e(113);window.StickersAnimation=i.StickersAnimation,window.StickersSettings=o.StickersSettings,window.Stickers=a.Stickers;try{stManager.done(jsc("web/stickers.js"))}catch(r){}},650:function(t,n,e){"use strict";e.r(n),e.d(n,"StickersAnimation",function(){return i});var i=function(){function t(t){if(window.isMVK){var n=document.createElement("script");n.onload=function(){t()},n.src="/js/cmodules/web/bodymovin.js",document.head.appendChild(n)}else stManager.add([jsc("web/bodymovin.js")],function(){t()})}function n(t){var n=e(t),i=1;if(n){hasClass(t,"animation_play")||(hide(geByClass1("sticker_img",t)),addClass(t,"animation_play")),n.play();var o=attr(t,"data-loop-count");o=parseInt(o),isNaN(o)&&(o=3),-1!==o&&(!n._cbs.loopComplete||n._cbs.loopComplete&&0===n._cbs.loopComplete.length)&&n.addEventListener("loopComplete",function a(e){i++;var r=!0;if(o>=i&&(r=!1),r){var s=attr(t,"data-uniq-id");p[s]=0,""!==n._cbs.loopComplete&&n.removeEventListener("loopComplete",a),n.stop()}})}}function e(t){if(!geByClass1("svg_sticker_animation",t))return!1;var n=attr(t,"data-uniq-id"),e=u[n];return e?e:!1}function o(t,n){var i=e(t);if(i)return void("function"==typeof n&&n(i));var o=attr(t,"data-uniq-id");if(!p[o]){p[o]=1;var r=attr(t,"data-animation-path"),s=attr(t,"data-sticker-id"),d=!1;if(s&&(d=c[s]?a(t):r&&a(t)),d){var l={container:t,renderer:"svg",loop:!0,autoplay:!1,name:o,rendererSettings:{scaleMode:"noScale",progressiveLoad:!0,hideOnTransparent:!0,className:"svg_sticker_animation"}};c[s]?l.animationData=c[s]:l.path=r;var f=geByClass1("svg_sticker_animation",t);if(f&&re(f),i=bodymovin.loadAnimation(l),!c[s])return void i.addEventListener("data_ready",function(){c[s]=i.animationData,u[o]=i,"function"==typeof n&&n(i)})}"function"==typeof n&&(u[o]=i,"function"==typeof n&&n(i))}}function a(t){var n=t.getBoundingClientRect().top,e=t.getBoundingClientRect().bottom,i=n<window.innerHeight&&e>=0;return i&&isVisible(t)}var r=!1,s=!1,c={},u={},d={},l=void 0,f=500,p={};return{checkSettingsAndLoadInWeb:function(t){if(StickersSettings.getAutoplay()){var n=ge("fc_msg"+t),e=geByClass1("sticker_animation",n);i.loadAndPlaySticker(e)}},checkSettingsAndLoad:function(t,n,e){StickersSettings.getAutoplay()&&(e?i.loadStickerInMvkIMAndPlay(t,n):(t.textFull||t.text).indexOf("sticker_animation",0)&&i.loadStickerInMvkIMAndPlay(t.id,n))},loadStickerInMvkIMAndPlay:function(t,n){var e="_msg"+t;n&&(e="msg_id_"+t);var o=geByClass1("sticker_animation",geByClass1(e));i.loadAndPlayStickerWithTimer(o,500)},loadAutoplayAnimationStickers:function(e){if("undefined"==typeof bodymovin)return void t(function(){i.loadAutoplayAnimationStickers()});if(e){if(s)return;s=!0}if(!r){r=!0;var a=geByClass("sticker_animation_autoplay");a&&each(a,function(t,e){o(e,function(){n(e)})}),r=!1}},loadAndPlaySticker:function(e){return e?"undefined"==typeof bodymovin?(t(function(){i.loadAndPlaySticker(e)}),""):void o(e,function(){n(e)}):void 0},loadAndPlayStickerWithTimer:function(t,n){if(t&&!d[t]){n||(n=1e3);var e=ge(t);hasClass(e,"sticker_animation_disabled_timer")||(d[t]=setTimeout(function(){(e||(e=ge(t),!hasClass(e,"sticker_animation_disabled_timer")))&&(i.loadAndPlaySticker(e),clearTimeout(d[t]),d[t]=!1)},n))}},reloadStickers:function(){u={}},touchStartSticker:function(t){window.oncontextmenu||(window.oncontextmenu=function(t){return t.preventDefault(),t.stopPropagation(),window.oncontextmenu=null,!1}),l=setTimeout(function(){i.loadAndPlaySticker(t)},f)},touchEndSticker:function(){l&&clearTimeout(l)}}}()}});