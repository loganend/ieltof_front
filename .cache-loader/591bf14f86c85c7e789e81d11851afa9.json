{"remainingRequest":"/Users/serqeycheremisin/ieltof/node_modules/babel-loader/lib/index.js!/Users/serqeycheremisin/ieltof/src/components/App.js","dependencies":[{"path":"/Users/serqeycheremisin/ieltof/src/components/App.js","mtime":1525084501660},{"path":"/Users/serqeycheremisin/ieltof/.babelrc","mtime":1523141114949},{"path":"/Users/serqeycheremisin/ieltof/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/serqeycheremisin/ieltof/node_modules/babel-loader/lib/index.js","mtime":1520329890000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Content = require(\"components/Content\");\n\nvar _Content2 = _interopRequireDefault(_Content);\n\nvar _Policy = require(\"components/Policy\");\n\nvar _Policy2 = _interopRequireDefault(_Policy);\n\nvar _Terms = require(\"components/Terms\");\n\nvar _Terms2 = _interopRequireDefault(_Terms);\n\nvar _MainPage = require(\"components/MainPage\");\n\nvar _MainPage2 = _interopRequireDefault(_MainPage);\n\nvar _UserPage = require(\"components/UserPage\");\n\nvar _UserPage2 = _interopRequireDefault(_UserPage);\n\nvar _MainStore = require(\"../stores/MainStore\");\n\nvar _MainStore2 = _interopRequireDefault(_MainStore);\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar getIsMobile = function getIsMobile() {\n    var isMobile = false;\n\n    try {\n        isMobile = !!(window.navigator && window.navigator.standalone || navigator.userAgent.match('CriOS') || navigator.userAgent.match(/mobile/i));\n    } catch (ex) {\n        // continue regardless of error\n    }\n\n    return isMobile;\n};\n\nvar App = function (_React$Component) {\n    _inherits(App, _React$Component);\n\n    function App(props) {\n        _classCallCheck(this, App);\n\n        var _this = _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).call(this, props));\n\n        _this.checkLoginAfterRefresh = function (response) {\n            console.log(4);\n            if (response.status === 'connected') {\n                console.log('connected');\n                _this.checkLoginState(response);\n            } else {\n                _this.state.content = _react2.default.createElement(_MainPage2.default, { callback: _this.responseFacebook.bind(_this) });\n                _this.setState({});\n                // window.FB.login(loginResponse => this.checkLoginState(loginResponse), true);\n            }\n        };\n\n        _this.responseApi = function (authResponse) {\n            console.log(6);\n            window.FB.api('/me', { locale: _this.props.language, fields: _this.props.fields }, function (me) {\n                Object.assign(me, authResponse);\n                _this.callback(me);\n            });\n        };\n\n        _this.checkLoginState = function (response) {\n            console.log(5);\n            _this.setStateIfMounted({ isProcessing: false });\n            if (response.authResponse) {\n                _this.responseApi(response.authResponse);\n            } else {\n                if (_this.props.onFailure) {\n                    _this.props.onFailure({ status: response.status });\n                } else {\n                    _this.callback({ status: response.status });\n                }\n            }\n        };\n\n        _this.callback = function (response) {\n            console.log(response);\n            if (response.status !== \"unknown\") {\n\n                _this.state.content = _react2.default.createElement(_UserPage2.default, { user: response });\n\n                _this.setState({});\n            }\n        };\n\n        _this.responseFacebook = function (response) {\n            console.log(response);\n            if (response.status !== \"unknown\") {\n\n                _this.state.content = _react2.default.createElement(_UserPage2.default, { user: response });\n\n                _this.setState({});\n            }\n        };\n\n        _this.state = {\n            content: _react2.default.createElement(\"div\", null),\n            isSdkLoaded: false,\n            isProcessing: false\n        };\n        return _this;\n    }\n\n    _createClass(App, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n            console.log(1);\n            this._isMounted = true;\n            if (document.getElementById('facebook-jssdk')) {\n                this.sdkLoaded();\n                return;\n            }\n            this.setFbAsyncInit();\n            this.loadSdkAsynchronously();\n            var fbRoot = document.getElementById('fb-root');\n            if (!fbRoot) {\n                fbRoot = document.createElement('div');\n                fbRoot.id = 'fb-root';\n                document.body.appendChild(fbRoot);\n            }\n        }\n    }, {\n        key: \"componentWillReceiveProps\",\n        value: function componentWillReceiveProps(nextProps) {\n            if (this.state.isSdkLoaded && nextProps.autoLoad) {\n                window.FB.getLoginStatus(this.checkLoginAfterRefresh);\n            }\n        }\n    }, {\n        key: \"setStateIfMounted\",\n        value: function setStateIfMounted(state) {\n            if (this._isMounted) {\n                this.setState(state);\n            }\n        }\n    }, {\n        key: \"setFbAsyncInit\",\n        value: function setFbAsyncInit() {\n            var _this2 = this;\n\n            console.log(2);\n            var _props = this.props,\n                appId = _props.appId,\n                xfbml = _props.xfbml,\n                cookie = _props.cookie,\n                version = _props.version,\n                autoLoad = _props.autoLoad,\n                state = _props.state;\n\n            window.fbAsyncInit = function () {\n                window.FB.init({\n                    version: 'v2.12',\n                    appId: '1919046028165378',\n                    xfbml: xfbml,\n                    cookie: cookie\n                });\n                _this2.setStateIfMounted({ isSdkLoaded: true });\n                // console.log(window.location.search);\n                // console.log(window.location.search.indexOf(state));\n                // if ( window.location.search.indexOf(state) !== -1) {\n                //     console.log(7);\n                window.FB.getLoginStatus(_this2.checkLoginAfterRefresh);\n                // }\n            };\n        }\n    }, {\n        key: \"sdkLoaded\",\n        value: function sdkLoaded() {\n            this.setState({ isSdkLoaded: true });\n        }\n    }, {\n        key: \"loadSdkAsynchronously\",\n        value: function loadSdkAsynchronously() {\n            console.log(3);\n            var language = this.props.language;\n\n            (function (d, s, id) {\n                var element = d.getElementsByTagName(s)[0];\n                var fjs = element;\n                var js = element;\n                if (d.getElementById(id)) {\n                    return;\n                }\n                js = d.createElement(s);\n                js.id = id;\n                js.src = \"https://connect.facebook.net/\" + language + \"/sdk.js\";\n                fjs.parentNode.insertBefore(js, fjs);\n            })(document, 'script', 'facebook-jssdk');\n        }\n    }, {\n        key: \"componentWillMount\",\n        value: function componentWillMount() {\n            _MainStore2.default.on(\"face_to_face_test\", this.setFaceTestPage.bind(this));\n            _MainStore2.default.on(\"facebook_logpout_event\", this.onFacebookLogpoutEvent.bind(this));\n        }\n    }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n            _MainStore2.default.removeListener(\"face_to_face_test\", this.setFaceTestPage.bind(this));\n            _MainStore2.default.removeListener(\"facebook_logpout_event\", this.onFacebookLogpoutEvent.bind(this));\n\n            this._isMounted = false;\n        }\n    }, {\n        key: \"setFaceTestPage\",\n        value: function setFaceTestPage() {\n            this.state.content = _MainStore2.default.getContent();\n\n            this.setState({});\n        }\n    }, {\n        key: \"onFacebookLogpoutEvent\",\n        value: function onFacebookLogpoutEvent() {\n            // this.state.content = MainStore.getContent();\n            // this.setState({});\n            this.props.history.push(\"/\");\n            location.reload();\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _this3 = this;\n\n            return _react2.default.createElement(\n                \"div\",\n                null,\n                _react2.default.createElement(\n                    _reactRouterDom.Switch,\n                    null,\n                    _react2.default.createElement(_reactRouterDom.Route, { exact: true, path: \"/\", render: function render(props) {\n                            return _react2.default.createElement(_Content2.default, _extends({}, props, { data: _this3.state.content }));\n                        } }),\n                    _react2.default.createElement(_reactRouterDom.Route, { path: \"/privacy\", component: _Policy2.default }),\n                    _react2.default.createElement(_reactRouterDom.Route, { path: \"/terms\", component: _Terms2.default })\n                )\n            );\n        }\n    }]);\n\n    return App;\n}(_react2.default.Component);\n\nApp.defaultProps = {\n    redirectUri: typeof window !== 'undefined' ? window.location.href : '/',\n    scope: 'public_profile,email',\n    returnScopes: false,\n    xfbml: false,\n    cookie: false,\n    authType: '',\n    fields: 'name',\n    version: '2.3',\n    language: 'en_US',\n    disableMobileRedirect: false,\n    isMobile: getIsMobile(),\n    onFailure: null,\n    state: 'facebookdirect',\n    responseType: 'code'\n};\nexports.default = App;",{"version":3,"sources":["src/components/App.js"],"names":["getIsMobile","isMobile","window","navigator","standalone","userAgent","match","ex","App","props","checkLoginAfterRefresh","response","console","log","status","checkLoginState","state","content","responseFacebook","bind","setState","responseApi","authResponse","FB","api","locale","language","fields","me","Object","assign","callback","setStateIfMounted","isProcessing","onFailure","isSdkLoaded","_isMounted","document","getElementById","sdkLoaded","setFbAsyncInit","loadSdkAsynchronously","fbRoot","createElement","id","body","appendChild","nextProps","autoLoad","getLoginStatus","appId","xfbml","cookie","version","fbAsyncInit","init","d","s","element","getElementsByTagName","fjs","js","src","parentNode","insertBefore","on","setFaceTestPage","onFacebookLogpoutEvent","removeListener","getContent","history","push","location","reload","Component","defaultProps","redirectUri","href","scope","returnScopes","authType","disableMobileRedirect","responseType"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAGA;;;;;;;;;;AAKA,IAAMA,cAAc,SAAdA,WAAc,GAAM;AACtB,QAAIC,WAAW,KAAf;;AAEA,QAAI;AACAA,mBAAW,CAAC,EAAGC,OAAOC,SAAP,IAAoBD,OAAOC,SAAP,CAAiBC,UAAtC,IAAqDD,UAAUE,SAAV,CAAoBC,KAApB,CAA0B,OAA1B,CAArD,IAA2FH,UAAUE,SAAV,CAAoBC,KAApB,CAA0B,SAA1B,CAA7F,CAAZ;AACH,KAFD,CAEE,OAAOC,EAAP,EAAW;AACT;AACH;;AAED,WAAON,QAAP;AACH,CAVD;;IAaqBO,G;;;AAEjB,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA,8GACTA,KADS;;AAAA,cAiGnBC,sBAjGmB,GAiGM,UAACC,QAAD,EAAc;AACnCC,oBAAQC,GAAR,CAAY,CAAZ;AACA,gBAAIF,SAASG,MAAT,KAAoB,WAAxB,EAAqC;AACjCF,wBAAQC,GAAR,CAAY,WAAZ;AACA,sBAAKE,eAAL,CAAqBJ,QAArB;AACH,aAHD,MAGO;AACH,sBAAKK,KAAL,CAAWC,OAAX,GAAqB,oDAAU,UAAU,MAAKC,gBAAL,CAAsBC,IAAtB,OAApB,GAArB;AACA,sBAAKC,QAAL,CAAc,EAAd;AACA;AACH;AACJ,SA3GkB;;AAAA,cA6GnBC,WA7GmB,GA6GL,UAACC,YAAD,EAAkB;AAC5BV,oBAAQC,GAAR,CAAY,CAAZ;AACAX,mBAAOqB,EAAP,CAAUC,GAAV,CAAc,KAAd,EAAqB,EAACC,QAAQ,MAAKhB,KAAL,CAAWiB,QAApB,EAA8BC,QAAQ,MAAKlB,KAAL,CAAWkB,MAAjD,EAArB,EAA+E,UAACC,EAAD,EAAQ;AACnFC,uBAAOC,MAAP,CAAcF,EAAd,EAAkBN,YAAlB;AACA,sBAAKS,QAAL,CAAcH,EAAd;AACH,aAHD;AAIH,SAnHkB;;AAAA,cAqHnBb,eArHmB,GAqHD,UAACJ,QAAD,EAAc;AAC5BC,oBAAQC,GAAR,CAAY,CAAZ;AACA,kBAAKmB,iBAAL,CAAuB,EAACC,cAAc,KAAf,EAAvB;AACA,gBAAItB,SAASW,YAAb,EAA2B;AACvB,sBAAKD,WAAL,CAAiBV,SAASW,YAA1B;AACH,aAFD,MAEO;AACH,oBAAI,MAAKb,KAAL,CAAWyB,SAAf,EAA0B;AACtB,0BAAKzB,KAAL,CAAWyB,SAAX,CAAqB,EAACpB,QAAQH,SAASG,MAAlB,EAArB;AACH,iBAFD,MAEO;AACH,0BAAKiB,QAAL,CAAc,EAACjB,QAAQH,SAASG,MAAlB,EAAd;AACH;AACJ;AACJ,SAjIkB;;AAAA,cAmInBiB,QAnImB,GAmIR,UAACpB,QAAD,EAAc;AACrBC,oBAAQC,GAAR,CAAYF,QAAZ;AACA,gBAAIA,SAASG,MAAT,KAAoB,SAAxB,EAAmC;;AAE/B,sBAAKE,KAAL,CAAWC,OAAX,GAAqB,oDAAU,MAAMN,QAAhB,GAArB;;AAEA,sBAAKS,QAAL,CAAc,EAAd;AACH;AACJ,SA3IkB;;AAAA,cA6InBF,gBA7ImB,GA6IA,UAACP,QAAD,EAAc;AAC7BC,oBAAQC,GAAR,CAAYF,QAAZ;AACA,gBAAIA,SAASG,MAAT,KAAoB,SAAxB,EAAmC;;AAG/B,sBAAKE,KAAL,CAAWC,OAAX,GAAqB,oDAAU,MAAMN,QAAhB,GAArB;;AAEA,sBAAKS,QAAL,CAAc,EAAd;AACH;AACJ,SAtJkB;;AAEf,cAAKJ,KAAL,GAAa;AACTC,qBAAS,0CADA;AAETkB,yBAAa,KAFJ;AAGTF,0BAAc;AAHL,SAAb;AAFe;AAOlB;;;;4CAmBmB;AAChBrB,oBAAQC,GAAR,CAAY,CAAZ;AACA,iBAAKuB,UAAL,GAAkB,IAAlB;AACA,gBAAIC,SAASC,cAAT,CAAwB,gBAAxB,CAAJ,EAA+C;AAC3C,qBAAKC,SAAL;AACA;AACH;AACD,iBAAKC,cAAL;AACA,iBAAKC,qBAAL;AACA,gBAAIC,SAASL,SAASC,cAAT,CAAwB,SAAxB,CAAb;AACA,gBAAI,CAACI,MAAL,EAAa;AACTA,yBAASL,SAASM,aAAT,CAAuB,KAAvB,CAAT;AACAD,uBAAOE,EAAP,GAAY,SAAZ;AACAP,yBAASQ,IAAT,CAAcC,WAAd,CAA0BJ,MAA1B;AACH;AACJ;;;kDAEyBK,S,EAAW;AACjC,gBAAI,KAAK/B,KAAL,CAAWmB,WAAX,IAA0BY,UAAUC,QAAxC,EAAkD;AAC9C9C,uBAAOqB,EAAP,CAAU0B,cAAV,CAAyB,KAAKvC,sBAA9B;AACH;AACJ;;;0CAEiBM,K,EAAO;AACrB,gBAAI,KAAKoB,UAAT,EAAqB;AACjB,qBAAKhB,QAAL,CAAcJ,KAAd;AACH;AACJ;;;yCAEgB;AAAA;;AACbJ,oBAAQC,GAAR,CAAY,CAAZ;AADa,yBAE4C,KAAKJ,KAFjD;AAAA,gBAENyC,KAFM,UAENA,KAFM;AAAA,gBAECC,KAFD,UAECA,KAFD;AAAA,gBAEQC,MAFR,UAEQA,MAFR;AAAA,gBAEgBC,OAFhB,UAEgBA,OAFhB;AAAA,gBAEyBL,QAFzB,UAEyBA,QAFzB;AAAA,gBAEmChC,KAFnC,UAEmCA,KAFnC;;AAGbd,mBAAOoD,WAAP,GAAqB,YAAM;AACvBpD,uBAAOqB,EAAP,CAAUgC,IAAV,CAAe;AACXF,6BAAS,OADE;AAEXH,2BAAO,kBAFI;AAGXC,gCAHW;AAIXC;AAJW,iBAAf;AAMA,uBAAKpB,iBAAL,CAAuB,EAACG,aAAa,IAAd,EAAvB;AACA;AACA;AACA;AACA;AACAjC,uBAAOqB,EAAP,CAAU0B,cAAV,CAAyB,OAAKvC,sBAA9B;AACA;AACH,aAdD;AAeH;;;oCAEW;AACR,iBAAKU,QAAL,CAAc,EAACe,aAAa,IAAd,EAAd;AACH;;;gDAGuB;AACpBvB,oBAAQC,GAAR,CAAY,CAAZ;AADoB,gBAEba,QAFa,GAED,KAAKjB,KAFJ,CAEbiB,QAFa;;AAGpB,aAAC,UAAC8B,CAAD,EAAIC,CAAJ,EAAOb,EAAP,EAAc;AACX,oBAAMc,UAAUF,EAAEG,oBAAF,CAAuBF,CAAvB,EAA0B,CAA1B,CAAhB;AACA,oBAAMG,MAAMF,OAAZ;AACA,oBAAIG,KAAKH,OAAT;AACA,oBAAIF,EAAElB,cAAF,CAAiBM,EAAjB,CAAJ,EAA0B;AACtB;AACH;AACDiB,qBAAKL,EAAEb,aAAF,CAAgBc,CAAhB,CAAL;AACAI,mBAAGjB,EAAH,GAAQA,EAAR;AACAiB,mBAAGC,GAAH,qCAAyCpC,QAAzC;AACAkC,oBAAIG,UAAJ,CAAeC,YAAf,CAA4BH,EAA5B,EAAgCD,GAAhC;AACH,aAXD,EAWGvB,QAXH,EAWa,QAXb,EAWuB,gBAXvB;AAYH;;;6CAyDoB;AACjB,gCAAU4B,EAAV,CAAa,mBAAb,EAAkC,KAAKC,eAAL,CAAqB/C,IAArB,CAA0B,IAA1B,CAAlC;AACA,gCAAU8C,EAAV,CAAa,wBAAb,EAAuC,KAAKE,sBAAL,CAA4BhD,IAA5B,CAAiC,IAAjC,CAAvC;AACH;;;+CAEsB;AACnB,gCAAUiD,cAAV,CAAyB,mBAAzB,EAA8C,KAAKF,eAAL,CAAqB/C,IAArB,CAA0B,IAA1B,CAA9C;AACA,gCAAUiD,cAAV,CAAyB,wBAAzB,EAAmD,KAAKD,sBAAL,CAA4BhD,IAA5B,CAAiC,IAAjC,CAAnD;;AAEA,iBAAKiB,UAAL,GAAkB,KAAlB;AACH;;;0CAEiB;AACd,iBAAKpB,KAAL,CAAWC,OAAX,GAAqB,oBAAUoD,UAAV,EAArB;;AAEA,iBAAKjD,QAAL,CAAc,EAAd;AACH;;;iDAEwB;AACrB;AACA;AACA,iBAAKX,KAAL,CAAW6D,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACAC,qBAASC,MAAT;AACH;;;iCAEQ;AAAA;;AACL,mBACA;AAAA;AAAA;AAEI;AAAA;AAAA;AACI,2EAAO,WAAP,EAAa,MAAK,GAAlB,EAAsB,QAAQ,gBAAChE,KAAD;AAAA,mCAC1B,8DAAaA,KAAb,IAAoB,MAAM,OAAKO,KAAL,CAAWC,OAArC,IAD0B;AAAA,yBAA9B,GADJ;AAII,2EAAO,MAAK,UAAZ,EAAuB,2BAAvB,GAJJ;AAKI,2EAAO,MAAK,QAAZ,EAAqB,0BAArB;AALJ;AAFJ,aADA;AAeH;;;;EAnM4B,gBAAMyD,S;;AAAlBlE,G,CAWVmE,Y,GAAe;AAClBC,iBAAa,OAAO1E,MAAP,KAAkB,WAAlB,GAAgCA,OAAOsE,QAAP,CAAgBK,IAAhD,GAAuD,GADlD;AAElBC,WAAO,sBAFW;AAGlBC,kBAAc,KAHI;AAIlB5B,WAAO,KAJW;AAKlBC,YAAQ,KALU;AAMlB4B,cAAU,EANQ;AAOlBrD,YAAQ,MAPU;AAQlB0B,aAAS,KARS;AASlB3B,cAAU,OATQ;AAUlBuD,2BAAuB,KAVL;AAWlBhF,cAAUD,aAXQ;AAYlBkC,eAAW,IAZO;AAalBlB,WAAO,gBAbW;AAclBkE,kBAAc;AAdI,C;kBAXL1E,G","file":"App.js","sourceRoot":"/Users/serqeycheremisin/ieltof","sourcesContent":["import React from \"react\";\nimport Content from \"components/Content\";\nimport Policy from \"components/Policy\";\nimport Terms from \"components/Terms\";\nimport MainPage from \"components/MainPage\";\nimport UserPage from \"components/UserPage\";\nimport MainStore from \"../stores/MainStore\";\n\n\nimport  { HashRouter,\n    Switch,\n    Route,\n    Link } from 'react-router-dom';\n\nconst getIsMobile = () => {\n    let isMobile = false;\n\n    try {\n        isMobile = !!((window.navigator && window.navigator.standalone) || navigator.userAgent.match('CriOS') || navigator.userAgent.match(/mobile/i));\n    } catch (ex) {\n        // continue regardless of error\n    }\n\n    return isMobile;\n};\n\n\nexport default class App extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            content: <div/>,\n            isSdkLoaded: false,\n            isProcessing: false\n        }\n    }\n\n    static defaultProps = {\n        redirectUri: typeof window !== 'undefined' ? window.location.href : '/',\n        scope: 'public_profile,email',\n        returnScopes: false,\n        xfbml: false,\n        cookie: false,\n        authType: '',\n        fields: 'name',\n        version: '2.3',\n        language: 'en_US',\n        disableMobileRedirect: false,\n        isMobile: getIsMobile(),\n        onFailure: null,\n        state: 'facebookdirect',\n        responseType: 'code',\n    };\n\n    componentDidMount() {\n        console.log(1);\n        this._isMounted = true;\n        if (document.getElementById('facebook-jssdk')) {\n            this.sdkLoaded();\n            return;\n        }\n        this.setFbAsyncInit();\n        this.loadSdkAsynchronously();\n        let fbRoot = document.getElementById('fb-root');\n        if (!fbRoot) {\n            fbRoot = document.createElement('div');\n            fbRoot.id = 'fb-root';\n            document.body.appendChild(fbRoot);\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.state.isSdkLoaded && nextProps.autoLoad) {\n            window.FB.getLoginStatus(this.checkLoginAfterRefresh);\n        }\n    }\n\n    setStateIfMounted(state) {\n        if (this._isMounted) {\n            this.setState(state);\n        }\n    }\n\n    setFbAsyncInit() {\n        console.log(2);\n        const {appId, xfbml, cookie, version, autoLoad, state} = this.props;\n        window.fbAsyncInit = () => {\n            window.FB.init({\n                version: 'v2.12',\n                appId: '1919046028165378',\n                xfbml,\n                cookie,\n            });\n            this.setStateIfMounted({isSdkLoaded: true});\n            // console.log(window.location.search);\n            // console.log(window.location.search.indexOf(state));\n            // if ( window.location.search.indexOf(state) !== -1) {\n            //     console.log(7);\n            window.FB.getLoginStatus(this.checkLoginAfterRefresh);\n            // }\n        };\n    }\n\n    sdkLoaded() {\n        this.setState({isSdkLoaded: true});\n    }\n\n\n    loadSdkAsynchronously() {\n        console.log(3);\n        const {language} = this.props;\n        ((d, s, id) => {\n            const element = d.getElementsByTagName(s)[0];\n            const fjs = element;\n            let js = element;\n            if (d.getElementById(id)) {\n                return;\n            }\n            js = d.createElement(s);\n            js.id = id;\n            js.src = `https://connect.facebook.net/${language}/sdk.js`;\n            fjs.parentNode.insertBefore(js, fjs);\n        })(document, 'script', 'facebook-jssdk');\n    }\n\n    checkLoginAfterRefresh = (response) => {\n        console.log(4);\n        if (response.status === 'connected') {\n            console.log('connected');\n            this.checkLoginState(response);\n        } else {\n            this.state.content = <MainPage callback={this.responseFacebook.bind(this)}/>;\n            this.setState({})\n            // window.FB.login(loginResponse => this.checkLoginState(loginResponse), true);\n        }\n    };\n\n    responseApi = (authResponse) => {\n        console.log(6);\n        window.FB.api('/me', {locale: this.props.language, fields: this.props.fields}, (me) => {\n            Object.assign(me, authResponse);\n            this.callback(me);\n        });\n    };\n\n    checkLoginState = (response) => {\n        console.log(5);\n        this.setStateIfMounted({isProcessing: false});\n        if (response.authResponse) {\n            this.responseApi(response.authResponse);\n        } else {\n            if (this.props.onFailure) {\n                this.props.onFailure({status: response.status});\n            } else {\n                this.callback({status: response.status});\n            }\n        }\n    };\n\n    callback = (response) => {\n        console.log(response);\n        if (response.status !== \"unknown\") {\n\n            this.state.content = <UserPage user={response}/>;\n\n            this.setState({});\n        }\n    };\n\n    responseFacebook = (response) => {\n        console.log(response);\n        if (response.status !== \"unknown\") {\n\n\n            this.state.content = <UserPage user={response}/>;\n\n            this.setState({})\n        }\n    };\n\n    componentWillMount() {\n        MainStore.on(\"face_to_face_test\", this.setFaceTestPage.bind(this));\n        MainStore.on(\"facebook_logpout_event\", this.onFacebookLogpoutEvent.bind(this));\n    }\n\n    componentWillUnmount() {\n        MainStore.removeListener(\"face_to_face_test\", this.setFaceTestPage.bind(this));\n        MainStore.removeListener(\"facebook_logpout_event\", this.onFacebookLogpoutEvent.bind(this));\n\n        this._isMounted = false;\n    }\n\n    setFaceTestPage() {\n        this.state.content = MainStore.getContent();\n\n        this.setState({});\n    }\n\n    onFacebookLogpoutEvent() {\n        // this.state.content = MainStore.getContent();\n        // this.setState({});\n        this.props.history.push(\"/\");\n        location.reload()\n    }\n\n    render() {\n        return (\n        <div>\n\n            <Switch>\n                <Route exact path='/' render={(props) => (\n                    <Content {...props} data={this.state.content}/>\n                )}/>\n                <Route path='/privacy' component={Policy}/>\n                <Route path='/terms' component={Terms}/>\n            </Switch>\n\n            {/*<Content data={this.state.content}/>*/}\n\n        </div>\n        )\n    }\n}"]}]}